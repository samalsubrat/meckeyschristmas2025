<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Meckeys Christmas Sale 2025</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Old+Standard+TT:ital,wght@0,400;0,700;1,400&display=swap"
        rel="stylesheet">

    <link rel="icon"
        href="https://mks.blr1.cdn.digitaloceanspaces.com/uploads/2023/07/cropped-logo_black_favicon-32x32.png"
        sizes="32x32">
    <link rel="icon"
        href="https://mks.blr1.cdn.digitaloceanspaces.com/uploads/2023/07/cropped-logo_black_favicon-300x300.png"
        sizes="192x192">
    <link rel="apple-touch-icon"
        href="https://mks.blr1.cdn.digitaloceanspaces.com/uploads/2023/07/cropped-logo_black_favicon-300x300.png">

    <style>
        body {
            font-family: 'Inter', sans-serif;
        }

        /* Prevent default inline-image baseline gap below the hero banner */
        header img {
            display: block;
        }

        .snowflake {
            position: absolute;
            top: -10px;
            background-color: #cbd5e1;
            border-radius: 50%;
            opacity: 0.8;
            animation: fall linear infinite;
        }

        @keyframes fall {
            to {
                transform: translateY(105vh);
            }
        }

        .santa-track {
            position: absolute;
            top: 60%;
            left: -20%;
            width: 100%;
            height: 100px;
            pointer-events: none;
            z-index: 0;
            animation: fly-across 40s linear infinite;
        }

        @keyframes fly-across {
            0% {
                transform: translateX(-10vw);
            }

            100% {
                transform: translateX(120vw);
            }
        }

        @keyframes santaFly {
            0% {
                left: -200px;
            }

            100% {
                left: calc(100% + 200px);
            }
        }

        /* Santa Silhouette */
        .santa-container {
            position: absolute;
            top: 15%;
            left: -200px;
            opacity: 0.15;
            z-index: 0;
            animation: santaFly 25s linear infinite;
        }

        .pattern2 {
            background-image: repeating-linear-gradient(-45deg, rgba(0, 0, 0, 0.13), rgba(0, 0, 0, 0.199) 2px, transparent 2px, transparent 6px);
            background-size: 4px 4px;
        }

        .text-gold-gradient {
            background: linear-gradient(45deg, #f7d154 0%, #fcf2c6 25%, #e6c456 50%, #796a26 75%, #ebc95c 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3);
        }

        /* Scalloped top edge - green half circles */
        .scallop-top-green {
            background: radial-gradient(circle at 50% 100%, #005832 10px, transparent 10px) 0 0 / 20px 12px repeat-x;
            height: 12px;
        }

        /* Discount tag badge */
        .discount-tag {
            position: absolute;
            top: 32px;
            left: 0px;
            z-index: 20;
            animation: tag-pulse 2s ease-in-out infinite;
        }
        .discount-tag-inner {
            background: linear-gradient(135deg, #b91c1c 0%, #dc2626 50%, #b91c1c 100%);
            color: white;
            padding: 6px 12px 6px 10px;
            font-family: 'Inter', sans-serif;
            font-size: 13px;
            font-weight: 700;
            border-radius: 0 4px 4px 0;
            box-shadow: 2px 2px 6px rgba(0,0,0,0.3);
            position: relative;
        }
        .discount-tag-inner::before {
            content: '';
            position: absolute;
            left: 0;
            bottom: -6px;
            width: 0;
            height: 0;
            border-left: 6px solid transparent;
            border-top: 6px solid #7f1d1d;
        }
        .discount-tag-inner::after {
            content: '';
            position: absolute;
            right: -8px;
            top: 50%;
            transform: translateY(-50%);
            border: 8px solid transparent;
            border-left: 8px solid #dc2626;
        }
        
    </style>
</head>

<body class="bg-slate-50 text-slate-900 antialiased">

    <nav class="fixed w-full z-50 top-0 bg-slate-50/80 backdrop-blur-md border-b border-slate-200">
        <div class="max-w-7xl mx-auto px-6 h-16 flex items-center justify-between">
            <div class="text-xl font-semibold tracking-tighter">Meckeys.</div>
            <div class="hidden md:flex space-x-8 text-sm font-medium text-slate-500">
                <a href="#" class="hover:text-slate-900 transition-colors">Keyboards</a>
                <a href="#" class="hover:text-slate-900 transition-colors">Mice</a>
                <a href="#" class="hover:text-slate-900 transition-colors">Audio</a>
            </div>
            <div class="flex items-center space-x-4">
                <svg class="w-6 h-6 text-slate-900 cursor-pointer" fill="none" stroke="currentColor"
                    viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5"
                        d="M16 11V7a4 4 0 00-8 0v4M5 9h14l1 12H4L5 9z"></path>
                </svg>
            </div>
        </div>
    </nav>

    <header class="relative mt-16 overflow-hidden">
        <!-- Background Image - Desktop -->
        <img id="hero-banner-desktop" src="heromain.png" 
            alt="Meckeys Christmas Sale 2025" class="hidden md:block w-full">
        <!-- Background Image - Mobile -->
        <img id="hero-banner-mobile" src="https://mks.blr1.cdn.digitaloceanspaces.com/christmas-2025/heromain-mobile.webp" 
            alt="Meckeys Christmas Sale 2025" class="md:hidden w-full">
        
        <!-- Snow overlay -->
        <div id="snow-container" class="absolute inset-0 pointer-events-none z-10"></div>
        
        <!-- Santa Silhouette overlay -->
        <div class="santa-container z-10">
            <svg width="180" height="80" viewBox="0 0 180 80" fill="currentColor" class="text-slate-400">
                <!-- Santa on Sleigh -->
                <ellipse cx="45" cy="50" rx="20" ry="12" />
                <circle cx="35" cy="38" r="10" />
                <rect x="25" y="48" width="40" height="8" rx="2" />
                <!-- Reindeer 1 -->
                <ellipse cx="90" cy="45" rx="12" ry="8" />
                <circle cx="98" cy="38" r="5" />
                <line x1="100" y1="34" x2="105" y2="28" stroke="currentColor" stroke-width="2" />
                <line x1="103" y1="34" x2="110" y2="30" stroke="currentColor" stroke-width="2" />
                <!-- Reindeer 2 -->
                <ellipse cx="125" cy="42" rx="10" ry="7" />
                <circle cx="132" cy="36" r="4" />
                <line x1="134" y1="33" x2="138" y2="28" stroke="currentColor" stroke-width="2" />
                <line x1="136" y1="33" x2="142" y2="29" stroke="currentColor" stroke-width="2" />
                <!-- Reindeer 3 -->
                <ellipse cx="155" cy="40" rx="8" ry="6" />
                <circle cx="161" cy="35" r="3" />
                <line x1="163" y1="33" x2="166" y2="29" stroke="currentColor" stroke-width="1.5" />
                <!-- Connection lines -->
                <line x1="65" y1="50" x2="78" y2="45" stroke="currentColor" stroke-width="1.5" />
                <line x1="102" y1="45" x2="115" y2="42" stroke="currentColor" stroke-width="1.5" />
                <line x1="135" y1="42" x2="147" y2="40" stroke="currentColor" stroke-width="1.5" />
            </svg>
        </div>
    </header>

    <main id="dynamic-content" class="w-full bg-[#861c19] relative z-10 pt-0"></main>

    <footer class="bg-slate-50 border-t border-slate-200 py-20 px-6">
        <div class="max-w-7xl mx-auto text-center">
            <h3 class="text-xl font-semibold tracking-tight mb-4">Meckeys.</h3>
            <p class="text-slate-500 font-light text-sm">© 2025 Meckeys Premium Peripherals.</p>
        </div>
    </footer>

    <script>
        // --- API Configuration ---
        const API_URL = 'https://meckeyschristmas2025.vercel.app/api';

        // --- Default Data (fallback) ---
        // Spotlight mediaType can be 'image' or 'video'. Use 'media' for the URL.
        const defaultData = {
            hero: { title: "Precision meets \nPerfection.", subtitle: "Upgrade your workspace with our limited winter collection." },
            sections: [
                {
                    id: 'sec_1', type: 'spotlight',
                    data: { title: "The Moonlight Series", subtext: "Typing Nirvana.", mediaType: "image", media: "https://images.unsplash.com/photo-1595225476474-87563907a212?w=1600&q=80" }
                },
                {
                    id: 'sec_2', type: 'grid',
                    data: {
                        title: "Blockbuster Deals", gridColumns: 0, products: [
                            { name: "Keychron Q1", oldPrice: 220, newPrice: 189, badge: "60% OFF", image: "https://images.unsplash.com/photo-1587829741301-dc798b91a603?w=800&q=80", link: "#" },
                            { name: "GMMK Pro", oldPrice: 349, newPrice: 299, badge: "40% OFF", image: "https://images.unsplash.com/photo-1626218174397-cc7b47570180?w=800&q=80", link: "#" }
                        ]
                    }
                }
            ]
        };

        // --- Fetch data from API ---
        async function fetchPageData() {
            try {
                const response = await fetch(`${API_URL}/page-data`);
                if (!response.ok) throw new Error('API request failed');
                return await response.json();
            } catch (error) {
                console.warn('Failed to fetch from API, using localStorage fallback:', error);
                return JSON.parse(localStorage.getItem('meckeys_v2_data')) || defaultData;
            }
        }

        // --- Render Page ---
        async function renderPage() {
            const appData = await fetchPageData();

            // --- Render Sections ---
            const container = document.getElementById('dynamic-content');

            appData.sections.forEach(section => {
                if (section.type === 'spotlight') {
                    const el = document.createElement('section');
                    el.className = "w-full min-h-[90vh] relative flex items-center bg-slate-900 text-white overflow-hidden";
                    
                    // Support both video and image backgrounds
                    // Use 'media' field (fallback to legacy 'image' field for backwards compatibility)
                    const mediaSrc = section.data.media || section.data.image;
                    const mediaType = section.data.mediaType || 'image';
                    
                    let mediaHtml;
                    if (mediaType === 'video') {
                        mediaHtml = `<video src="${mediaSrc}" class="w-full h-full object-cover opacity-60" autoplay loop muted playsinline></video>`;
                    } else {
                        mediaHtml = `<img src="${mediaSrc}" class="w-full h-full object-cover opacity-60">`;
                    }
                    
                    el.innerHTML = `
                    <div class="absolute inset-0">
                        ${mediaHtml}
                        <div class="absolute inset-0 bg-gradient-to-t from-slate-900/90 via-transparent"></div>
                    </div>
                    <div class="relative z-10 max-w-7xl mx-auto px-6 w-full pt-20">
                        <h2 class="text-5xl md:text-7xl font-semibold tracking-tight mb-6">${section.data.title}</h2>
                        <p class="text-xl text-slate-300 font-light mb-10">${section.data.subtext}</p>
                        <button class="px-8 py-4 bg-white text-slate-900 font-medium rounded-full hover:bg-slate-200">Discover</button>
                    </div>
                `;
                    container.appendChild(el);
                } else if (section.type === 'grid') {
                    const el = document.createElement('section');
                    el.className = "py-24 px-6 md:px-24 lg:px-48 mx-auto relative overflow-hidden";

                    // Create snow container for this grid section
                    const snowId = 'grid-snow-' + section.id;

                    // Determine grid columns: use defined gridColumns, or auto-detect based on product count
                    const productCount = section.data.products.length;
                    const gridCols = section.data.gridColumns > 0 ? section.data.gridColumns : Math.min(productCount, 4);

                    // Map grid columns to Tailwind classes
                    const gridColsClass = {
                        1: 'grid-cols-1',
                        2: 'grid-cols-1 sm:grid-cols-2',
                        3: 'grid-cols-1 sm:grid-cols-2 lg:grid-cols-3',
                        4: 'grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 lg:gap-7',
                        5: 'grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-5',
                        6: 'grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-6'
                    }[gridCols] || 'grid-cols-1 sm:grid-cols-2 lg:grid-cols-4';

                    const productsHtml = section.data.products.map(p => {
                        // Discount tag HTML (only show if badge text exists)
                        const badgeHtml = p.badge ? `
                            <div class="discount-tag">
                                <div class="discount-tag-inner">${p.badge}</div>
                            </div>
                        ` : '';
                        
                        // Strikethrough old price (default: true for backwards compatibility)
                        const strikeClass = p.strikeOldPrice !== false ? 'line-through' : '';
                        
                        return `
                    <a href="${p.link || '#'}" class="group h-[450px] flex flex-col relative" target="_blank" rel="noopener noreferrer">
                        ${badgeHtml}
                        <!-- Green scalloped top edge (half circles) -->
                        <div class="scallop-top-green flex-shrink-0"></div>
                        
                        <!-- Main card body with green background -->
                        <div class="bg-[#005832] p-3 flex-1 flex flex-col overflow-hidden">
                            <!-- White rounded image container -->
                            <div class="bg-white rounded-2xl overflow-hidden h-[320px] flex-shrink-0">
                                <img src="${p.image}" alt="${p.name}" class="w-full h-full object-cover group-hover:scale-105 transition-transform duration-500">
                            </div>
                            
                            <!-- Product name -->
                            <div class="flex flex-col justify-around flex-shrink-0 mt-auto">
                            <h3 class="text-white text-lg font-medium mt-5 tracking-wide line-clamp-1">${p.name}</h3>
                            <div class='flex justify-start items-center gap-2'>
                                <h3 class="text-white text-3xl font-semibold tracking-wide">₹${p.newPrice}</h3>
                                <h3 class="text-white text-sm font-regular tracking-tight ${strikeClass}">₹${p.oldPrice}</h3>
                            </div>
                            </div>
                        </div>
                    </a>
                `;
                    }).join('');
                    el.innerHTML = `
                    <div id="${snowId}" class="absolute inset-0 pointer-events-none z-0"></div>
                    <h2 class="text-5xl md:text-6xl font-bold tracking-tight text-gold-gradient mb-12  relative z-10" style="font-family: 'Old Standard TT', serif;">${section.data.title}</h2>
                    <div class="grid ${gridColsClass} gap-8 relative z-10 items-start">${productsHtml}</div>
                `;
                    container.appendChild(el);

                    // Add snow particles to this grid section
                    const gridSnowBox = document.getElementById(snowId);
                    for (let i = 0; i < 60; i++) {
                        const f = document.createElement('div');
                        f.className = 'snowflake';
                        f.style.left = Math.random() * 100 + '%';
                        f.style.width = Math.random() * 4 + 1 + 'px';
                        f.style.height = f.style.width;
                        f.style.opacity = Math.random() * 0.3 + 0.1;
                        f.style.backgroundColor = 'rgba(255, 255, 255, 0.6)';
                        f.style.animationDuration = Math.random() * 8 + 6 + 's';
                        f.style.animationDelay = Math.random() * 8 + 's';
                        gridSnowBox.appendChild(f);
                    }
                }
            });

            // --- Snow Effect for Hero ---
            const snowBox = document.getElementById('snow-container');
            for (let i = 0; i < 50; i++) {
                const f = document.createElement('div'); f.className = 'snowflake';
                f.style.left = Math.random() * 100 + 'vw'; f.style.width = Math.random() * 4 + 2 + 'px'; f.style.height = f.style.width;
                f.style.animationDuration = Math.random() * 5 + 5 + 's'; f.style.animationDelay = Math.random() * 5 + 's';
                snowBox.appendChild(f);
            }
        }

        // Initialize page
        renderPage();
    </script>
</body>

</html>